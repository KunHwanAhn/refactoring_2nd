# 챕터3. 코드에서 나는 악취

> NOTE: 아래 나열되어 있는 이름들은 후에 6~11장에서 다를 기술들의 이름입니다. 기술들에 대해서 정리를 하면 각각 링크를 추가할 예정입니다.

## 1. 기이한 이름
코드를 명료하게 표현하는 데 가장 중요한 요소는 바로 `이름`이다.

### 해결할 수 있는 방법
- 함수 선언 바꾸기
- 변수 이름 바꾸기
- 필드 이름 바꾸기

## 2. 중복 코드
똑같은 코드 구조가 여러 곳에서 반복된다면, 하나로 통합하여 더 나은 프로그램을 만들 수 있다.

### 해결할 수 있는 방법
- 함수 추출하기
- 문장 슬라이드하기
- 메서드 올리기

## 3. 긴 함수
오랜 기간 잘 활용되는 프로그램들은 하나같이 짧은 함수로 구성됐다.

### 해결할 수 있는 방법
- 함수 추출하기
- 임시 변수를 질의 함수로 바꾸기
- 매개변수 객체 만들기
- 객체 통째로 넘기기
- 함수를 명령으로 바꾸기
- 조건문 분해하기
- 조건부 로직을 다형성으로 바꾸기
- 반복문 쪼개기

## 4. 긴 매개변수 목록
전역 데이터가 늘어나는 상태를 막기 위해서, 필요한 값을 매개변수로 전달하라 배웠다. 하지만, 매개변수 목록이 길어지면 그 자체로 이해하기 어려울 때가 많다.

### 해결할 수 있는 방법
- 매개변수를 질의 함수로 바꾸기
- 객체 통째로 넘기기
- 매개변수 객체 만들기
- 플래그 인수 제거하기
- 여러 함수를 클래스로 묶기

## 5. 전역 데이터
전역 데이터는 코드베이스 어디에서든 건드릴 수 있고 값을 누가 바꿨는지 찾아낼 메커니즘이 없다는 게 문제다.

### 해결할 수 있는 방법
- 변수 캡슐화하기

## 6. 가변 데이터
전달 받은 데이터는 절대 변경하지 않고, 데이터를 변경하려면 반드시 원래 데이터는 그대로 둔 채 복사본을 만들어서 변경하여 반환하라.

### 해결할 수 있는 방법
- 변수 캡슐화하기
- 변수 쪼개기
- 문장 슬라이드하기
- 함수 추출하기
- 질의 함수와 변경 함수 분리하기
- 세터 제거하기
- 파생 변수를 질의 함수로 바꾸기
- 여러 함수를 클래스로 묶기
- 여러 함수를 변환 함수로 묶기
- 참조를 값으로 바꾸기

## 7. 뒤엉킨 변경
시스템에서 고쳐야 할 딱 한 군데를 찾아서 그 부분만 수정할 수 있기를 바란다. 이렇게 할 수 없다면 뒤엉킨 변경과 산탄총 수술 중 하나가 풍긴다.

### 해결할 수 있는 방법
- 단계 쪼개기
- 함수 옮기기
- 함수 추출하기
- 클래스 추출하기

## 8. 산탄총 수술
산탄총 수술은 뒤엉킨 변경과 비슷하면서도 정반대다. 코드를 변경할 때마다 자잘하게 수정해야 하는 클래스가 많을 때 풍긴다.

### 해결할 수 있는 방법
- 함수 옮기기
- 필드 옮기기
- 여러 함수를 클래스로 묶기
- 단계 조깨기
- 함수 인라인하기
- 클래스 인라인하기

## 9. 기능 편애
흔히 어떤 함수가 자기가 속한 모듈의 함수나 데이터보다 다른 모듈의 함수나 데이터와 상호작용할 일이 더 많을 때 풍기는 냄새다.

### 해결할 수 있는 방법
- 함수 옮기기
- 함수 추출하기

## 10. 데이터 뭉치
서로 어울려 노는 걸 좋아하는 데이터 뭉치는 보금자리를 따로 마련해줘야 마땅하다.
### 해결할 수 있는 방법
- 클래스 추출하기
- 매개변수 객체 만들기
- 객체 통째로 넘기기

## 11. 기본형 집착
문자열을 다루는 코드에서 특히 흔하다. 자료형들을 문자열로만 표현하는 악취.
예를 들어, 전화번호를 단순히 문자 집합으로만 표현하기엔 아쉬움이 많다. 최소한 사용자에게 보여줄 때는 일관된 형식으로 출력해주는 기능이라도 갖춰야 한다.

### 해결할 수 있는 방법
- 기본형을 객체로 바꾸기
- 타입 코드를 서브클래스로 바꾸기
- 조건부 로직을 다형성으로 바꾸기
- 클래스 추출하기
- 매개변수 객체 만들기

## 12. 반복되는 switch문
중복된 switch문이 문제가 되는 이유는 조건절을 하나 추가할 때마다 다른 switch문들도 모두 찾아서 함께 수정해야 하기 때문이다.

### 해결할 수 있는 방법
- 조건부 로직을 다형성으로 바꾸기

## 13. 반복문
일급 함수(`first-class function`)을 지원하는 언어에서 시대에 걸맞지 않은 반복문을 찾아서 제거해야 한다.

### 해결할 수 있는 방법
- 반복문을 파이프라인으로 바꾸기

## 14. 성의 없는 요소
프로그램의 요소(메서드, 클래스, 인터페이스 등)를 이용하는 것을 좋아한다. 하지만 그 요소들이 필요 없을 때도 있다.

### 해결할 수 있는 방법
- 함수 인라인하기
- 클래스 인라인하기
- 계층 합치기

## 15. 추측성 일반화
`나중에 필요할 거야`라는 생각으로 당장은 필요 없는 종류의 로직을 작성해둔 코드에서 풍긴다.

### 해결할 수 있는 방법
- 계층 합치기
- 함수 인라인하기
- 클래스 인라인하기
- 함수 선언 바꾸기
- 죽은 코드 제거하기

## 16. 임시 필드
간혹 특정 상황에서만 값이 설정되는 필드를 가진 클래스도 있다. 하지만 객체를 가져올 때는 당연히 모든 필드가 채워져 있으리라 기대하는 게 보통이라, 다른 사용자가 이해하기 어렵게 만든다.

### 해결할 수 있는 방법
- 클래스 추출하기
- 함수 옮기기
- 특이 케이스 추가하기

## 17. 메시지 체인
메시지 체인은 클라이언트가 한 객체를 통해 다른 객체를 얻은 뒤 방금 얻은 객체에 또 다른 객체를 요청하는 식으로, 다른 객체를 요청하는 작업이 연쇄적으로 이어지를 코드를 말한다.
게터가 꼬리에 꼬리를 물고 이어지거나, 임시 변수들이 줄줄이 나열되는 코드가 있다. 이는 클라이언트가 객체 내비게이션 구조에 종속됐음을 의미한다.

### 해결할 수 있는 방법
- 위임 숨기기
- 함수 추출하기
- 함수 옮기기

## 18. 중개자
클래스가 제공하는 메서드 중 절반이 다른 클래스에 구현을 위임하는 경우 냄새가 풍긴다.

### 해결할 수 있는 방법
- 중개자 제거하기
- 함수 인라인하기

## 19. 내부자 거래
개발자는 모듈 사이에 벽을 두껍게 세우기를 좋아하며, 그래서 모듈 사이의 데이터 거래가 많으면 `결합도`가 높아진다고 투덜댄다. 하지만 그 양을 최소로 줄이고 모두 투명하게 처리해야 한다.

### 해결할 수 있는 방법
- 함수 옮기기
- 필드 옮기기
- 위임 숨기기
- 서브클래스를 위임으로 바꾸기
- 슈퍼클래스를 위임으로 바꾸기

## 20. 거대한 클래스
한 클래스가 너무 많은 일을 하려다 보면 필드 수가 상당히 늘어난다. 그리고 클래스에 필드가 너무 많으면 중복 코드가 생기기 쉽다.

### 해결할 수 있는 방법
- 클래스 추출하기
- 슈퍼클래스 추출하기
- 타입 코드를 서브클래스로 바꾸기

## 21. 서로 다른 인터페이스의 대안 클래스들
클래스를 사용할 때의 큰 장점은 필요에 따라 언제든 다른 클래스로 교체할 수 있다는 것이다. 단, 교체하려면 인터페이스가 같아야 한다.

### 해결할 수 있는 방법
- 함수 선언 바꾸기
- 함수 옮기기
- 슈퍼클래스 추출하기

## 22. 데이터 클래스
데이터 클래스란 데이터 필드와 게터/세터 메서드로만 구성된 클래스를 말한다.
단순 데이터 저장용도로만 쓰이다 보니, 다른 클래스가 너무 깊이까지 함부로 다룰 때가 많다.

### 해결할 수 있는 방법
- 레코드 캡슐화하기
- 세터 제거하기
- 함수 옮기기
- 함수 추출하기
- 단계 쪼개기

## 23. 상속 포기
서브클래스는 부모로부터 메서드와 데이터를 물려받는다. 하지만 부모의 유사늘 원치 않거나 필요 없다면 어떻게 해야 할까?

### 해결할 수 있는 방법
- 메서드 내리기
- 필드 내리기
- 서브클래스를 위임으로 바꾸기
- 슈퍼클래스를 위임으로 바꾸기

## 24. 주석
주석은 악취가 아닌 향기를 입힌다. 다만 주석을 탈취제처럼 사용하는 데 있다. 주석이 장황하게 달린 원인이 코드를 잘못 작성했기 때문인 경우가 의외로 많다.
### 해결할 수 있는 방법
- 함수 추출하기
- 함수 선언 바꾸기
- 어서션 추가하기
